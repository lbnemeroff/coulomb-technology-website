<!-- =============================================
       NAVIGATION
  ============================================= -->
  <nav class="nav" id="mainNav">
    <div class="nav-inner">
      <a href="/" class="nav-logo" aria-label="Coulomb Technology">
        <img src="https://coulombtechnology.com/wp-content/uploads/2026/02/coulomb-logo-black-1.jpg" alt="Coulomb Technology" />
      </a>
      <ul class="nav-links">
        <li class="nav-has-dropdown">
          <a href="#">Industries <span class="nav-arrow">▼</span></a>
          <div class="nav-dropdown">
            <a href="/commercial-industrial/" class="nav-drop-item">Commercial &amp; Industrial</a>
            <a href="/defense-government/" class="nav-drop-item">Defense &amp; Government</a>
            <a href="/motive-fleet/" class="nav-drop-item">Motive &amp; Fleet</a>
          </div>
        </li>
        <li class="nav-has-dropdown">
          <a href="/all-products/">Products <span class="nav-arrow">▼</span></a>
          <div class="nav-dropdown">
            <a href="/all-products/" class="nav-drop-item nav-drop-all-products">All Products <span class="nav-drop-tag nav-drop-tag-green">Overview</span></a>
            <div class="nav-drop-divider"></div>
            <div class="nav-drop-section-label">Smart EMS</div>
            <a href="/279v-series-b/" class="nav-drop-item">Series-B <span class="nav-drop-tag">279V</span></a>
            <a href="/48v-series-r/" class="nav-drop-item">Series-R <span class="nav-drop-tag">48V</span></a>
            <a href="#" class="nav-drop-item nav-drop-soon">Series-D <span class="nav-drop-tag nav-drop-tag-soon">Coming Soon</span></a>
            <a href="#" class="nav-drop-item nav-drop-soon">Series-L <span class="nav-drop-tag nav-drop-tag-soon">Coming Soon</span></a>
            <div class="nav-drop-divider"></div>
            <div class="nav-drop-section-label">Core BESS</div>
            <a href="/279v-series-dc/" class="nav-drop-item">Series-DC <span class="nav-drop-tag">279V</span></a>
            <a href="/series-m/" class="nav-drop-item">Series-M <span class="nav-drop-tag">48V</span></a>
            <a href="https://coulombtechnology.com/series-s/" class="nav-drop-item">Series-S <span class="nav-drop-tag">12V</span></a>
          </div>
        </li>
        <li><a href="/about/">About</a></li>
      </ul>
      <div class="nav-cta-group">
        <a href="/contact/" class="nav-cta">Contact Us</a>
      </div>
      <div class="nav-hamburger" id="hamburger">
        <span></span><span></span><span></span>
      </div>
    </div>
  </nav>

  <!-- =============================================
       CONTACT HERO
  ============================================= -->
  <section class="contact-hero">
    <div class="contact-hero-inner">
      <div class="contact-hero-text fade-up">
        <div class="section-label" style="color:var(--green);">Get In Touch</div>
        <h1 class="contact-hero-h1">Let's Build Your<br/><em>Energy Solution</em></h1>
        <p class="contact-hero-sub">Our engineering team works directly with your team to design, size, and deploy the right sodium-ion storage system for your application.</p>
        <div class="contact-trust-row">
          <div class="contact-trust-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07A19.5 19.5 0 0 1 4.69 12 19.79 19.79 0 0 1 1.61 3.18 2 2 0 0 1 3.6 1h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L7.91 8.6a16 16 0 0 0 6 6l.96-.96a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
            <span>Response within 1 business day</span>
          </div>
          <div class="contact-trust-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
            <span>Direct access to engineering team</span>
          </div>
          <div class="contact-trust-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
            <span>NDA available on request</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- =============================================
       CONTACT FORM + SIDEBAR
  ============================================= -->
  <section class="contact-body-section">
    <div class="contact-body-inner">

      <!-- LEFT: FORM -->
      <div class="contact-form-wrap fade-up">
        <form class="contact-form" id="contactForm" novalidate>

          <!-- INQUIRY TYPE — visual checkbox cards -->
          <div class="cf-group cf-inquiry-group">
            <label class="cf-group-label">What can we help you with? <span class="cf-req">*</span></label>
            <div class="cf-inquiry-cards" id="inquiryCards">
              <label class="cf-inquiry-card" data-value="system-design">
                <input type="checkbox" name="inquiry[]" value="system-design" />
                <div class="cf-inquiry-card-inner">
                  <div class="cf-inquiry-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
                  </div>
                  <div class="cf-inquiry-text">
                    <strong>Request System Design</strong>
                    <span>Custom sizing &amp; engineering</span>
                  </div>
                </div>
              </label>
              <label class="cf-inquiry-card" data-value="demo">
                <input type="checkbox" name="inquiry[]" value="demo" />
                <div class="cf-inquiry-card-inner">
                  <div class="cf-inquiry-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="23 7 16 12 23 17 23 7"/><rect x="1" y="5" width="15" height="14" rx="2" ry="2"/></svg>
                  </div>
                  <div class="cf-inquiry-text">
                    <strong>Schedule a Demo</strong>
                    <span>Live product walkthrough</span>
                  </div>
                </div>
              </label>
              <label class="cf-inquiry-card" data-value="quote">
                <input type="checkbox" name="inquiry[]" value="quote" />
                <div class="cf-inquiry-card-inner">
                  <div class="cf-inquiry-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
                  </div>
                  <div class="cf-inquiry-text">
                    <strong>Request a Quote</strong>
                    <span>Pricing &amp; procurement</span>
                  </div>
                </div>
              </label>
              <label class="cf-inquiry-card" data-value="consultation">
                <input type="checkbox" name="inquiry[]" value="consultation" />
                <div class="cf-inquiry-card-inner">
                  <div class="cf-inquiry-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                  </div>
                  <div class="cf-inquiry-text">
                    <strong>General Inquiry</strong>
                    <span>Questions &amp; information</span>
                  </div>
                </div>
              </label>
              <label class="cf-inquiry-card" data-value="partner">
                <input type="checkbox" name="inquiry[]" value="partner" />
                <div class="cf-inquiry-card-inner">
                  <div class="cf-inquiry-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="12" x2="16" y2="12"/></svg>
                  </div>
                  <div class="cf-inquiry-text">
                    <strong>Become a Partner</strong>
                    <span>Integrators, OEMs &amp; channel</span>
                  </div>
                </div>
              </label>
              <label class="cf-inquiry-card" data-value="media">
                <input type="checkbox" name="inquiry[]" value="media" />
                <div class="cf-inquiry-card-inner">
                  <div class="cf-inquiry-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"/><path d="M18 14h-8"/><path d="M15 18h-5"/><path d="M10 6h8v4h-8V6z"/></svg>
                  </div>
                  <div class="cf-inquiry-text">
                    <strong>Media &amp; PR</strong>
                    <span>Press, interviews &amp; coverage</span>
                  </div>
                </div>
              </label>
            </div>
          </div>

          <!-- CONTACT INFO ROW -->
          <div class="cf-row">
            <div class="cf-group">
              <label class="cf-label" for="cf-first-name">First Name <span class="cf-req">*</span></label>
              <input class="cf-input" type="text" id="cf-first-name" name="first_name" placeholder="Jane" required />
            </div>
            <div class="cf-group">
              <label class="cf-label" for="cf-last-name">Last Name <span class="cf-req">*</span></label>
              <input class="cf-input" type="text" id="cf-last-name" name="last_name" placeholder="Smith" required />
            </div>
          </div>

          <div class="cf-row">
            <div class="cf-group">
              <label class="cf-label" for="cf-email">Work Email <span class="cf-req">*</span></label>
              <input class="cf-input" type="email" id="cf-email" name="email" placeholder="jane@company.com" required />
            </div>
            <div class="cf-group">
              <label class="cf-label" for="cf-phone">Phone Number</label>
              <input class="cf-input" type="tel" id="cf-phone" name="phone" placeholder="+1 (555) 000-0000" />
            </div>
          </div>

          <div class="cf-row">
            <div class="cf-group">
              <label class="cf-label" for="cf-company">Company Name <span class="cf-req">*</span></label>
              <input class="cf-input" type="text" id="cf-company" name="company" placeholder="Acme Corp" required />
            </div>
            <div class="cf-group">
              <label class="cf-label" for="cf-title">Job Title</label>
              <input class="cf-input" type="text" id="cf-title" name="title" placeholder="Director of Facilities" />
            </div>
          </div>

          <!-- INDUSTRY DROPDOWN -->
          <div class="cf-group">
            <label class="cf-label" for="cf-industry">Industry <span class="cf-req">*</span></label>
            <div class="cf-select-wrap">
              <select class="cf-select" id="cf-industry" name="industry" required>
                <option value="" disabled selected>Select your industry…</option>
                <optgroup label="Commercial &amp; Industrial">
                  <option value="manufacturing">Manufacturing &amp; Industrial</option>
                  <option value="data-centers">Data Centers &amp; Cloud</option>
                  <option value="logistics">Logistics &amp; Distribution</option>
                  <option value="agriculture">Agriculture &amp; Food Processing</option>
                  <option value="healthcare">Healthcare Facilities</option>
                  <option value="telecom">Telecommunications</option>
                </optgroup>
                <optgroup label="Defense &amp; Government">
                  <option value="military">Military &amp; Defense</option>
                  <option value="emergency-services">Emergency Services</option>
                  <option value="critical-infrastructure">Critical Infrastructure</option>
                  <option value="border-security">Border Security</option>
                </optgroup>
                <optgroup label="Motive &amp; Fleet">
                  <option value="golf-resorts">Golf Courses &amp; Resorts</option>
                  <option value="universities">Universities &amp; Campuses</option>
                  <option value="hospitality">Hospitality &amp; Hotels</option>
                  <option value="security-patrol">Security Patrol</option>
                </optgroup>
                <option value="other">Other</option>
              </select>
              <svg class="cf-select-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="6 9 12 15 18 9"/></svg>
            </div>
          </div>

          <!-- OTHER INDUSTRY (shown when "Other" selected) -->
          <div class="cf-group cf-other-industry" id="otherIndustryGroup" style="display:none;">
            <label class="cf-label" for="cf-industry-other">Please specify your industry <span class="cf-req">*</span></label>
            <input class="cf-input" type="text" id="cf-industry-other" name="industry_other" placeholder="Describe your industry…" />
          </div>

          <!-- PROJECT DETAILS -->
          <div class="cf-group">
            <label class="cf-label" for="cf-message">Tell us about your project or needs</label>
            <textarea class="cf-textarea" id="cf-message" name="message" rows="5" placeholder="Describe your application, facility size, current energy challenges, timeline, or any other relevant details…"></textarea>
          </div>

          <!-- SUBMIT -->
          <div class="cf-submit-row">
            <button type="submit" class="cf-submit-btn" id="cfSubmitBtn">
              <span class="cf-submit-text">Send Message</span>
              <svg class="cf-submit-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
            </button>
            <p class="cf-privacy-note">By submitting, you agree to our <a href="/privacy-policy/">Privacy Policy</a>. We never share your data.</p>
          </div>

          <!-- SUCCESS / ERROR STATES -->
          <div class="cf-success" id="cfSuccess" style="display:none;">
            <div class="cf-success-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg>
            </div>
            <h3>Message Sent!</h3>
            <p>Thank you — a member of our engineering team will be in touch within 1 business day.</p>
          </div>
          <div class="cf-error-msg" id="cfError" style="display:none;">
            Something went wrong. Please try again or email us directly at <a href="mailto:sales@coulombtechnology.com">sales@coulombtechnology.com</a>.
          </div>

        </form>
      </div>

      <!-- RIGHT: SIDEBAR -->
      <aside class="contact-sidebar fade-up fade-up-d1">

        <div class="cs-card cs-card-dark">
          <div class="cs-card-label">What Happens Next</div>
          <ol class="cs-steps">
            <li>
              <div class="cs-step-num">1</div>
              <div class="cs-step-text">
                <strong>We review your submission</strong>
                <span>Our engineering team reads every inquiry — no auto-routing to sales.</span>
              </div>
            </li>
            <li>
              <div class="cs-step-num">2</div>
              <div class="cs-step-text">
                <strong>Initial call within 1 business day</strong>
                <span>We'll schedule a 30-min discovery call to understand your application.</span>
              </div>
            </li>
            <li>
              <div class="cs-step-num">3</div>
              <div class="cs-step-text">
                <strong>Custom system design</strong>
                <span>We deliver a sizing recommendation, TCO analysis, and deployment plan.</span>
              </div>
            </li>
          </ol>
        </div>

        <div class="cs-card cs-card-light">
          <div class="cs-card-label">Direct Contact</div>
          <div class="cs-contact-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
            <a href="mailto:sales@coulombtechnology.com">sales@coulombtechnology.com</a>
          </div>
          <div class="cs-contact-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07A19.5 19.5 0 0 1 4.69 12 19.79 19.79 0 0 1 1.61 3.18 2 2 0 0 1 3.6 1h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L7.91 8.6a16 16 0 0 0 6 6l.96-.96a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
            <a href="tel:+1-208-768-8888">208-768-8888</a>
          </div>
          <div class="cs-contact-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
            <span>Headquarters: USA</span>
          </div>
        </div>

        <div class="cs-card cs-card-green">
          <div class="cs-stat-row">
            <div class="cs-stat">
              <div class="cs-stat-num">0</div>
              <div class="cs-stat-label">Thermal Incidents</div>
            </div>
            <div class="cs-stat">
              <div class="cs-stat-num">14%</div>
              <div class="cs-stat-label">Lower 15-yr TCO</div>
            </div>
            <div class="cs-stat">
              <div class="cs-stat-num">20yr</div>
              <div class="cs-stat-label">Battery Life</div>
            </div>
          </div>
          <p class="cs-green-note">Sodium-ion: the safer, longer-lasting alternative to lithium-ion.</p>
        </div>

      </aside>
    </div>
  </section>

  <!-- =============================================
       FOOTER (same as homepage)
  ============================================= -->  <footer class="footer">
    <div class="footer-inner">
      <div class="footer-top">
        <div>
          <div class="footer-logo">
            <!-- White logo for dark footer -->
            <img src="https://coulombtechnology.com/wp-content/uploads/2026/02/coulomb-logo-white-1.webp" alt="Coulomb Technology" />
          </div>
          <p class="footer-tagline">Energy Storage You Can Bank On. High-uptime, safety-first sodium-ion systems with lower total cost of ownership.</p>
          <div class="footer-social">
            <a href="https://www.linkedin.com/company/coulomb-technology/" aria-label="LinkedIn" target="_blank" rel="noopener">
              <svg viewBox="0 0 24 24" fill="currentColor"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg>
            </a>
            <a href="#" aria-label="Twitter">
              <svg viewBox="0 0 24 24" fill="currentColor"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/></svg>
            </a>
          </div>
        </div>
        <div class="footer-col">
          <h4>Products</h4>
          <ul>
            <li><a href="/all-products/">All Products</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Industries</h4>
          <ul>
            <li><a href="/commercial-industrial/">Commercial &amp; Industrial</a></li>
            <li><a href="/defense-government/">Defense &amp; Government</a></li>
            <li><a href="/motive-fleet/">Motive &amp; Fleet</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Company</h4>
          <ul>
            <li><a href="/about-us/">About Us</a></li>
            <li><a href="/contact/">Contact</a></li>
            <li><a href="#">Partners</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <div class="footer-copy">&copy; 2026 Coulomb Technology, Inc. All rights reserved.</div>
        <div class="footer-made">&#127482;&#127480; <strong>Made in America</strong> &mdash; Sodium is 1,000&times; more abundant than lithium</div>
        <div class="footer-legal">
          <a href="/privacy-policy/">Privacy Policy</a>
          <a href="/terms-conditions/">Terms of Use</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- =============================================
       JAVASCRIPT — Nav, form logic, pre-selection
  ============================================= -->
  <script>
  (function() {
    /* ── NAV SCROLL ── */
    var nav = document.getElementById('mainNav');
    window.addEventListener('scroll', function() {
      nav.classList.toggle('scrolled', window.scrollY > 40);
    }, { passive: true });

    /* ── MOBILE NAV ── */
    var hamburger = document.getElementById('hamburger');
    hamburger.addEventListener('click', function() {
      nav.classList.toggle('nav-open');
    });

    /* ── NAV DROPDOWNS ── */
    document.querySelectorAll('.nav-has-dropdown').forEach(function(li) {
      var link = li.querySelector('a');
      var dropdown = li.querySelector('.nav-dropdown');
      if (!dropdown) return;
      li.addEventListener('mouseenter', function() { dropdown.style.display = 'block'; });
      li.addEventListener('mouseleave', function() { dropdown.style.display = 'none'; });
      link.addEventListener('click', function(e) {
        if (window.innerWidth < 900) {
          e.preventDefault();
          var isOpen = dropdown.style.display === 'block';
          dropdown.style.display = isOpen ? 'none' : 'block';
        }
      });
    });

    /* ── INQUIRY CARD TOGGLE ── */
    document.querySelectorAll('.cf-inquiry-card').forEach(function(card) {
      var checkbox = card.querySelector('input[type="checkbox"]');
      checkbox.addEventListener('change', function() {
        card.classList.toggle('selected', checkbox.checked);
      });
    });

    /* ── INDUSTRY "OTHER" REVEAL ── */
    var industrySelect = document.getElementById('cf-industry');
    var otherGroup = document.getElementById('otherIndustryGroup');
    var otherInput = document.getElementById('cf-industry-other');
    industrySelect.addEventListener('change', function() {
      var isOther = this.value === 'other';
      otherGroup.style.display = isOther ? 'block' : 'none';
      otherInput.required = isOther;
    });

    /* ── PRE-SELECTION FROM URL PARAMS ── */
    var params = new URLSearchParams(window.location.search);
    var inquiry = params.get('inquiry');
    if (inquiry) {
      var inquiries = inquiry.split(',');
      inquiries.forEach(function(val) {
        val = val.trim();
        var card = document.querySelector('.cf-inquiry-card[data-value="' + val + '"]');
        if (card) {
          var cb = card.querySelector('input[type="checkbox"]');
          cb.checked = true;
          card.classList.add('selected');
        }
      });
    }

    /* ── FADE-UP ANIMATIONS ── */
    var fadeEls = document.querySelectorAll('.fade-up');
    if ('IntersectionObserver' in window) {
      var observer = new IntersectionObserver(function(entries) {
        entries.forEach(function(e) {
          if (e.isIntersecting) { e.target.classList.add('visible'); observer.unobserve(e.target); }
        });
      }, { threshold: 0.1 });
      fadeEls.forEach(function(el) { observer.observe(el); });
    } else {
      fadeEls.forEach(function(el) { el.classList.add('visible'); });
    }

    /* ── FORM SUBMISSION (WordPress CF7 / mailto fallback) ── */
    var form = document.getElementById('contactForm');
    var submitBtn = document.getElementById('cfSubmitBtn');
    var successEl = document.getElementById('cfSuccess');
    var errorEl = document.getElementById('cfError');

    form.addEventListener('submit', function(e) {
      e.preventDefault();

      /* Basic validation */
      var required = form.querySelectorAll('[required]');
      var valid = true;
      required.forEach(function(field) {
        field.classList.remove('cf-invalid');
        if (!field.value.trim()) {
          field.classList.add('cf-invalid');
          valid = false;
        }
      });

      /* At least one inquiry type */
      var anyChecked = form.querySelectorAll('input[name="inquiry[]"]:checked').length > 0;
      var inquiryGroup = document.getElementById('inquiryCards');
      inquiryGroup.classList.toggle('cf-invalid-group', !anyChecked);
      if (!anyChecked) valid = false;

      if (!valid) return;

      /* Collect form data */
      var data = new FormData(form);
      submitBtn.disabled = true;
      submitBtn.querySelector('.cf-submit-text').textContent = 'Sending…';

      /* Send via WordPress AJAX or fallback */
      fetch(window.location.origin + '/wp-admin/admin-ajax.php', {
        method: 'POST',
        body: (function() {
          data.append('action', 'coulomb_contact_form');
          data.append('nonce', (window.coulombContactNonce || ''));
          return data;
        })()
      })
      .then(function(r) { return r.json(); })
      .then(function(res) {
        if (res && res.success) {
          form.style.display = 'none';
          successEl.style.display = 'flex';
        } else {
          errorEl.style.display = 'block';
          submitBtn.disabled = false;
          submitBtn.querySelector('.cf-submit-text').textContent = 'Send Message';
        }
      })
      .catch(function() {
        errorEl.style.display = 'block';
        submitBtn.disabled = false;
        submitBtn.querySelector('.cf-submit-text').textContent = 'Send Message';
      });
    });

  })();
  </script>
